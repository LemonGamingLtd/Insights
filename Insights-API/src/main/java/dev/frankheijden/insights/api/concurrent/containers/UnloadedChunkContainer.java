package dev.frankheijden.insights.api.concurrent.containers;

import dev.frankheijden.insights.api.concurrent.ScanOptions;
import dev.frankheijden.insights.api.objects.chunk.ChunkCuboid;
import dev.frankheijden.insights.nms.core.ChunkEntity;
import dev.frankheijden.insights.nms.core.ChunkSection;
import dev.frankheijden.insights.nms.core.InsightsNMS;
import org.bukkit.World;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.annotations.Nullable;
import java.io.IOException;
import java.util.concurrent.CompletableFuture;
import java.util.function.Consumer;

public class UnloadedChunkContainer extends ChunkContainer {

    /**
     * Constructs a new UnloadedChunkContainer, for scanning of an unloaded chunk.
     */
    public UnloadedChunkContainer(
            InsightsNMS nms,
            World world,
            int chunkX,
            int chunkZ,
            ChunkCuboid cuboid,
            ScanOptions options
    ) {
        super(nms, world, chunkX, chunkZ, cuboid, options);
    }

    @Override
    public CompletableFuture<Boolean> getChunkSections(Consumer<@Nullable ChunkSection> sectionConsumer) {
        nms.getUnloadedChunkSections(world, chunkX, chunkZ, sectionConsumer);
        return CompletableFuture.completedFuture(true);
    }

    @Override
    public CompletableFuture<Boolean> getChunkEntities(Consumer<@NotNull ChunkEntity> entityConsumer) throws IOException {
        nms.getUnloadedChunkEntities(world, chunkX, chunkZ, entityConsumer);
        return CompletableFuture.completedFuture(true);
    }
}
